<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns:http="http://www.mulesoft.org/schema/mule/http"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<sub-flow name="clients-system-tms-create-order" doc:id="2d65817d-e192-4be5-b752-57285a86b0d1" >
		<http:request method="POST" doc:name="Request" doc:id="da1b0e49-3008-4145-8e8e-e3216681bc22" config-ref="TMS-Unigis" path="${tms.connection.order.create.uri}">
			<http:body ><![CDATA[#[%dw 2.0
output application/json
---
payload]]]></http:body>
		</http:request>
		<ee:transform doc:name="map response message" doc:id="e6bd5f52-f298-4d44-8d48-e3fc9a1d660f" >
			<ee:message >
				<ee:set-payload ><![CDATA[%dw 2.0
import modules::code_errors_unigis as code_errors
output application/json
---
{
	"message":code_errors::error(payload.d)
}]]></ee:set-payload>
			</ee:message>
		</ee:transform>
	</sub-flow>
	<sub-flow name="client-system-tms-dispatch" doc:id="1121ef17-e768-4470-b0f3-271430ad6414" >
		<http:request method="POST" doc:name="Request" doc:id="20d3c784-2bf9-42f5-a6fe-72f6e455e50b" config-ref="TMS-Unigis" path="${tms.connection.dispatch.uri}" >
			<http:body ><![CDATA[#[%dw 2.0
output application/json
---
payload]]]></http:body>
		</http:request>
		<ee:transform doc:name="map response message" doc:id="f1c1e967-dcd7-4646-8ebf-a8fdbeadbb51" >
			<ee:message >
				<ee:set-payload ><![CDATA[%dw 2.0
import modules::code_errors_unigis as code_errors
output application/json
---
{
	"message":code_errors::error(payload.d)
}]]></ee:set-payload>
			</ee:message>
		</ee:transform>
	</sub-flow>
	<sub-flow name="client-system-tms-update" doc:id="217d9505-13f7-4a2b-aa4a-8a7adb8ec52e" >
		<http:request method="POST" doc:name="Request" doc:id="b9b4e8e5-9860-4924-a012-06ffbf755df1" config-ref="TMS-Unigis" path="${tms.connection.update.uri}" >
			<http:body ><![CDATA[#[%dw 2.0
output application/json
---
payload]]]></http:body>
		</http:request>
		<ee:transform doc:name="map response message" doc:id="80d9c3b7-e7cf-4c07-b98f-6be8154c1cef" >
			<ee:message >
				<ee:set-payload ><![CDATA[%dw 2.0
import modules::code_errors_unigis as code_errors
output application/json
---
{
	"message":code_errors::error(payload.d)
}]]></ee:set-payload>
			</ee:message>
		</ee:transform>
	</sub-flow>
	<sub-flow name="client-system-oms-query-stop" doc:id="102486c5-3c51-4424-8763-1b6562337bf1" >
		<http:request method="GET" doc:name="Request" doc:id="72d397c6-eeb1-49b1-8903-c6855fc25566" config-ref="TMS-Unigis" path="${tms.connection.query.stop}" >
			<http:query-params ><![CDATA[#[output application/java
---
{
	"IdViaje" : payload.idViaje,
	"ApiKey" : "F6-A9-A5-E4-6D-4",
	"RefDocumento" : payload.RefDocumento
}]]]></http:query-params>
		</http:request>
	</sub-flow>
</mule>
